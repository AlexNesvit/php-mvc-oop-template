# üü£ PHP MVC OOP –°—Ç–∞—Ä—Ç–æ–≤—ã–π –®–∞–±–ª–æ–Ω üü£ 

**[Description en fran√ßais](README.md)**

–°—Ç–∞—Ä—Ç–æ–≤—ã–π –®–∞–±–ª–æ–Ω –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ PHP —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã MVC –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –û–û–ü

## –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

–ú—ã –Ω–∞—á–∞–ª–∏ —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ –º–æ–¥–µ–ª–∏ MVC (Model-View-Controller). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

- **–ú–æ–¥–µ–ª—å (Model):** –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
- **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (View):** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (Controller):** –£–ø—Ä–∞–≤–ª—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π –∏ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –º–æ–¥–µ–ª—å—é –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

![alt text](<assets/images/structure.png>)

### 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ú—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ PHP –∏ PDO –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MySQL. –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `config.php` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

#### –®–∞–≥–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

1. –û—Ç–∫—Ä—ã—Ç—å **PHPMyAdmin** —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MAMP.
2. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `php_laravel_proprep`.
3. –°–æ–∑–¥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –≤–æ–ø—Ä–æ—Å—ã, —É—Ä–æ–∫–∏ –∏ —Ç.–¥.).

#### –ö–æ–¥ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```php
<?php
// –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
$db_host = 'localhost';
$db_name = 'php_laravel_proprep';
$db_user = 'root';
$db_pass = 'root';

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
try {
    $db = new PDO("mysql:host=$db_host;dbname=$db_name;charset=utf8", $db_user, $db_pass);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    die('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' . $e->getMessage());
}

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–¥–∞:

	‚Ä¢	$db_host, $db_name, $db_user, $db_pass : –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Ö–æ—Å—Ç, –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –ø–∞—Ä–æ–ª—å).
	‚Ä¢	new PDO(‚Ä¶): –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è PDO.
	‚Ä¢	setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION) : –í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º –æ—à–∏–±–æ–∫ —Å –≤—ã–±—Ä–æ—Å–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
	‚Ä¢	catch(PDOException $e) : –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –æ–Ω–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

3. –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–§–∞–π–ª index.php (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)

–§–∞–π–ª public/index.php ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É.

<?php
// –ó–∞–ø—É—Å–∫ —Å–µ—Å—Å–∏–∏
session_start();

// –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
require_once '../config/config.php';

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —è–∑—ã–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π)
if (isset($_GET['lang'])) {
    $_SESSION['lang'] = $_GET['lang'];
}

$lang = $_SESSION['lang'] ?? 'fr';

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
$translations = include "../lang/{$lang}.php";

// –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑—á–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤
spl_autoload_register(function ($class) {
    require_once "../app/core/{$class}.php";
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
$app = new App();

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–¥–∞:

	‚Ä¢	session_start() : –ó–∞–ø—É—Å–∫–∞–µ—Ç PHP-—Å–µ—Å—Å–∏—é –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, —Ç–∞–∫–æ–π –∫–∞–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫.
	‚Ä¢	require_once ‚Äò../config/config.php‚Äô : –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, –≤–∫–ª—é—á–∞—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
	‚Ä¢	$_SESSION[‚Äòlang‚Äô] : –≠—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ö—Ä–∞–Ω–∏—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —è–∑—ã–∫.
	‚Ä¢	spl_autoload_register() : –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
	‚Ä¢	$app = new App() : –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤—ã–∑—ã–≤–∞—è –∫–ª–∞—Å—Å App, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π.

4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π —Å –ø–æ–º–æ—â—å—é App.php

–§–∞–π–ª App.php –≤ –ø–∞–ø–∫–µ core –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é. –û–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç URL –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É –∏ –º–µ—Ç–æ–¥—É.

<?php
// –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

class App
{
    protected $controller = 'HomeController';
    protected $method = 'index';
    protected $params = [];

    public function __construct()
    {
        $url = $this->parseUrl();

        // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
        if (file_exists("../app/controllers/{$url[0]}Controller.php")) {
            $this->controller = "{$url[0]}Controller";
            unset($url[0]);
        }

        require_once "../app/controllers/{$this->controller}.php";
        $this->controller = new $this->controller;

        // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
        if (isset($url[1])) {
            if (method_exists($this->controller, $url[1])) {
                $this->method = $url[1];
                unset($url[1]);
            }
        }

        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
        $this->params = $url ? array_values($url) : [];

        // –í—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ –º–µ—Ç–æ–¥–∞
        call_user_func_array([$this->controller, $this->method], $this->params);
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ URL
    public function parseUrl()
    {
        if (isset($_GET['url'])) {
            return explode('/', filter_var(rtrim($_GET['url'], '/'), FILTER_SANITIZE_URL));
        }
        return ['Home'];
    }
}

<?php
// –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

class App
{
    protected $controller = 'HomeController';
    protected $method = 'index';
    protected $params = [];

    public function __construct()
    {
        $url = $this->parseUrl();

        // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
        if (file_exists("../app/controllers/{$url[0]}Controller.php")) {
            $this->controller = "{$url[0]}Controller";
            unset($url[0]);
        }

        require_once "../app/controllers/{$this->controller}.php";
        $this->controller = new $this->controller;

        // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
        if (isset($url[1])) {
            if (method_exists($this->controller, $url[1])) {
                $this->method = $url[1];
                unset($url[1]);
            }
        }

        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
        $this->params = $url ? array_values($url) : [];

        // –í—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ –º–µ—Ç–æ–¥–∞
        call_user_func_array([$this->controller, $this->method], $this->params);
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ URL
    public function parseUrl()
    {
        if (isset($_GET['url'])) {
            return explode('/', filter_var(rtrim($_GET['url'], '/'), FILTER_SANITIZE_URL));
        }
        return ['Home'];
    }
}

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–¥–∞:

	‚Ä¢	$controller, $method, $params : –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –º–µ—Ç–æ–¥ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∏–∑ URL.
	‚Ä¢	parseUrl() : –†–∞–∑–±–∏—Ä–∞–µ—Ç URL –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ –º–µ—Ç–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
	‚Ä¢	call_user_func_array : –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

	1.	–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π:
–ú—ã —Å–æ–∑–¥–∞–¥–∏–º –º–æ–¥–µ–ª–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
	2.	–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤:
–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –±—É–¥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–æ–≥–∏–∫–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º –º–µ–∂–¥—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏ –∏ –º–æ–¥–µ–ª—è–º–∏.
	3.	–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç–∏:
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –±—É–¥–µ—Ç –ø–æ–∑–≤–æ–ª—è—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–º –∏ —Ä—É—Å—Å–∫–∏–º —è–∑—ã–∫–∞–º–∏ —á–µ—Ä–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

–ê–≤—Ç–æ—Ä

	‚Ä¢	Alex NESVIT ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞.

–õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.
